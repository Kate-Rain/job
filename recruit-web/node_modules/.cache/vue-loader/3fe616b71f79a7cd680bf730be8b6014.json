{"remainingRequest":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\src\\view\\company\\company-create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\src\\view\\company\\company-create.vue","mtime":1706286066000},{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\001JavaTools\\001Java项目\\招聘系统\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {Company} from '@/model/company'\nimport {HRCompany} from '@/model/hrCompany'\nimport UploadImgs from '@/component/base/upload-image'\n\nexport default {\n  components: {\n\tUploadImgs,\n  },\n  data() {\n\treturn {\n\t  form: {\n\t  },\n\t  maxNum: 1,\n\t  loading: false,\n\t}\n  },\n  methods: {\n\t// 上传图片之后，获取服务器返回的url地址\n\tasync getValue() {\n\t\tconst val = await this.$refs.uploadEle.getValue()\n\t\tif (val && val.length > 0) {\n\t\t\tthis.form.logo = val[0].display\n\t\t\tthis.form.poster = val[1].display\n\t\t}\n\t},\n\tasync submitForm(formName) {\n\t  await this.getValue()\n\t  try {\n\t\tthis.loading = true\n\t\t// 新增企业\n\t\tconst res = await Company.create(this.form)\n\t\t// 根据新增的企业的名称查询company表，拿到对应的id\n\t\tconst result = await Company.getByName(this.form.name)\n\t\t// 根据hr_id和company_id新增一条记录到hr_company表\n\t\tawait HRCompany.create(this.$store.getters.user.id, result.id)\n\t\tthis.loading = false\n\t\tif (res.code < window.MAX_SUCCESS_CODE) {\n\t\t  this.$message.success(`${res.message}`)\n\t\t  // 返回我的企业信息页面\n\t\t  this.$emit('createClose')\n\t\t}\n\t  } catch (error) {\n\t\tthis.loading = false\n\t\tconsole.log(error)\n\t  }\n\t},\n\t// 重置表单\n\tresetForm(formName) {\n\t  this.$refs[formName].resetFields()\n\t},\n  },\n}\n",null]}