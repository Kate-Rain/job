{"remainingRequest":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\recruit\\recruit-system\\recruit-web\\src\\component\\layout\\nav-bar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\recruit\\recruit-system\\recruit-web\\src\\component\\layout\\nav-bar.vue","mtime":1706286066000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Breadcrumb from './breadcrumb'\nimport Screenfull from './screen-full'\nimport User from './user'\nimport ClearTab from './clear-tab'\nimport { Notify } from '@/model/notify'\nimport moment from 'moment'\n\nexport default {\n  name: 'NavBar',\n  created() {\n    this.readMessages()\n  },\n  // watch: {\n  //   messages: {\n  //     handler() {\n  //       this.value = this.messages.filter(msg => msg.is_read === false).length\n  //       if (this.value === 0) {\n  //         this.hidden = true\n  //       } else {\n  //         this.hidden = false\n  //       }\n  //     },\n  //     immediate: true,\n  //   },\n  // },\n  data() {\n    return {\n      value: 0,\n      hidden: true,\n      item: {\n        content: \"\",\n        id: '',\n        is_read: \"\",\n        time: \"\",\n        user_name: \"\"\n      },\n      messages: [],\n    }\n  },\n  methods: {\n    // 查看全部已读信息\n    async readAll() {\n      // 查看全部已读消息之前，会把全部未读消息状态修改为已读\n      await Notify.update(this.$store.getters.user.nickame)\n      const res = await Notify.get(this.$store.getters.user.nickname, \"true\")\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看全部信息\n    async viewAll() {\n      const res = await Notify.getAll(this.$store.getters.user.nickname)\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    // 查看未读信息\n    async readMessages() {\n      const res = await Notify.get(this.$store.getters.user.nickname, \"false\")\n      if (res==null) return;\n      this.messages = res\n      this.formateDate(this.messages)\n    },\n    formateDate(item) {\n      for (var i = 0; i < item.length; i++) {\n        item[i].time = moment(item[i].time).format(\"YYYY-MM-DD hh:mm:ss\")\n      }\n    },\n    \n  },\n  components: {\n    Breadcrumb,\n    User,\n    Screenfull,\n    ClearTab,\n  },\n}\n",null]}