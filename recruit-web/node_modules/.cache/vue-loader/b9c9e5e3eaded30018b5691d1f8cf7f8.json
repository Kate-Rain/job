{"remainingRequest":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\recruit\\recruit-system\\recruit-web\\src\\component\\index\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\recruit\\recruit-system\\recruit-web\\src\\component\\index\\index.vue","mtime":1745597156722},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\recruit\\recruit-system\\recruit-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport store from '@/store';\nimport {\n\tmapActions,\n\tmapMutations,\n\tmapGetters\n} from 'vuex'\nimport Vue from 'vue'\nimport Croppa from 'vue-croppa'\nimport User from '@/lin/model/user'\nimport Utils from '@/lin/util/util'\nimport _axios, {get} from '@/lin/plugin/axios'\n\nVue.use(Croppa)\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tuserImg:null,\n\t\t\tgroupId: \"\",\n\t\t\tcode: \"\",\n\t\t\tmyFlag: true,\n\t\t\tnum: 0,\n\t\t\tshowfind: false,\n\t\t\tshowlogin: false,\n\t\t\tshowregister: false,\n\t\t\tisone: false,\n\t\t\tistwo: false,\n\t\t\tdirection: \"rtl\",\n\t\t\tloading: false, // 加载动画\n\t\t\twait: 2, // 2000ms之内不能重复发起请求\n\t\t\tnowWait:0,\n\t\t\tthrottleLogin: null, // 节流登录\n\t\t\tform: {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\temail:\"\",\n\t\t\t\tver_code:\"\",\n\t\t\t\tconfirm_password: ''\n\t\t\t},\n\t\t\tregisterform: {\n\t\t\t\troletype: \"\",\n\t\t\t\tnickname: '',\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\tconfirm_password: '',\n\t\t\t\temail:'',\n\t\t\t\ttel: '',\n\t\t\t\tgroup_ids: ['', ],\n\t\t\t\tver_code:'' // 验证码\n\t\t\t},\n\t\t\tregisterRules: {\n\t\t\t\tusername: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入用户名',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入密码',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\troletype: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请选择用户类型',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\temail: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入邮箱',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\ttel: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入手机号码',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tconfirm_password: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请确认输入密码',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tnickname: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入真实姓名',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t},\n\t\t\trules: {\n\t\t\t\tusername: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入用户名',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入密码',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tver_code: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入验证码',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\temail: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入邮箱',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t}\n\t},\n\tprops:[\"isnow\"],\n\tcreated() {\n\n\t},\n\tcomputed: {\n\t\tisemplyee: function () {\n\t\t\tif (store.getters.user === null) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t// 求职者groupId==2\n\t\t\tif (this.groupId === 2 || store.getters.groupId === 2) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tishr: function () {\n\t\t\tif (store.getters.user === null) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t// hr groupId==3\n\t\t\tif (this.groupId === 3 || store.getters.groupId === 3) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tisadmin: function () {\n\t\t\tif (store.getters.user === null) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\t// admin groupId==4\n\t\t\tif (this.groupId === 4 || store.getters.groupId === 4) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\treturn false\n\t\t},\n\t\tnickname: function () {\n\t\t\tthis.userImg = store.getters.user.avatar ? store.getters.user.avatar : require(\"@/assets/image/user/user.png\");\n\t\t\treturn store.getters.user=== null ? null : store.getters.user\n\t\t},\n\t\tuserstate: function () {\n\t\t\tif (store.getters.user === null) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\t},\n\tmethods: {\n\t\tgoToCenter() {\n\t\t\tthis.$router.push('/center')\n\t\t},\n\t\tasync userRegister() {\n\t\t\ttry {\n\t\t\t\t// check\n\t\t\t\tfor(let i in this.registerform){\n\t\t\t\t\tif(typeof(this.registerform[i]) != \"string\") continue;\n\t\t\t\t\tif(!this.registerform[i].replace(/ /g,\"\").length){\n\t\t\t\t\t\treturn this.$message.warning(\"内容不能为空\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// 判断两次密码是否相同\n\t\t\t\tif(this.registerform.password != this.registerform.confirm_password){\n\t\t\t\t\t\treturn this.$message.warning(\"两次密码不一致\");\n\t\t\t\t}\n\t\t\t\t// 判断邮箱和手机格式是否正确\n\t\t\t\tif(!Utils.checkEmail(this.registerform.email) || !Utils.checkTel(this.registerform.tel)){\n\t\t\t\t\treturn this.$message.warning(\"邮箱或电话的格式错误\");\n\t\t\t\t}\n\t\t\t\tthis.registerform.group_ids[0] = this.registerform.roletype\n\t\t\t\tconst res = await User.register(this.registerform)\n\t\t\t\tif (res.code==400){\n\t\t\t\t\treturn this.$message.warning(res.message);\n\t\t\t\t}\n\t\t\t\tif (res.code < window.MAX_SUCCESS_CODE) {\n\t\t\t\t\tsetTimeout(() => {this.$message.success(`注册成功`)}, 500);\n\t\t\t\t\t// this.resetForm(formName)\n\t\t\t\t\tthis.handleClose1();\n\t\t\t\t\tthis.showlogin = true;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tthis.$message.error(e)\n\t\t\t}\n\t\t},\n\t\thandleClose(done) {\n\t\t\tthis.form = {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t}\n\t\t\tthis.showlogin = false\n\t\t},\n\t\thandleClose1(done) {\n\t\t\tthis.form = {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t}\n\t\t\tthis.showregister = false\n\t\t},\n\t\thandleClose2(done) {\n\t\t\tthis.form = {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t}\n\t\t\tthis.showfind = false\n\t\t},\n\t\tasync login() {\n\t\t\tconst {\n\t\t\t\tusername,\n\t\t\t\tpassword\n\t\t\t} = this.form\n\t\t\ttry {\n\t\t\t\tthis.loading = true;\n\t\t\t\tawait User.getToken(username, password);\n\t\t\t\tawait this.getInformation();\n\t\t\t\tthis.loading = false;\n\t\t\t\t// this.$router.push('/about')\n\t\t\t\tthis.handleClose()\n\t\t\t\tthis.$message.success('登录成功');\n\t\t\t\tstore.getters.user[\"loginTime\"] = new Date().toLocaleString();\n\t\t\t\tthis.$ws.connect_sock(store.getters.user.id)\n\t\t\t\tsetTimeout(() => {this.$ws.ws.send(JSON.stringify({type:\"tips\"}))}, 1000);\n\t\t\t\t// if(code!=200){this.$message.warning(code)}\n\t\t\t} catch (e) {\n\t\t\t\tthis.loading = false;\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t},\n\t\tasync getInformation() {\n\t\t\ttry {\n\t\t\t\t// 尝试获取当前用户信息\n\t\t\t\tconst user = await User.getPermissions()\n\t\t\t\tthis.setUserAndState(user)\n\t\t\t\tthis.setUserPermissions(user.permissions)\n\t\t\t\tconst id = store.getters.user === null ? \"\" : store.getters.user.id\n\t\t\t\tconst res = await get('recruit/user/getGroup/' + id)\n\t\t\t\tstore.getters.groupId = res\n\t\t\t\tthis.groupId = res\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e)\n\t\t\t}\n\t\t},\n\t\toutLogin() {\n\t\t\tif(this.nickname){\n\t\t\t\tthis.loginOut()\n\t\t\t\t// 关闭web连接\n\t\t\t\tif(this.$ws.ws){this.$ws.ws.close()}\n\t\t\t\tthis.$message.success(\"退出登录成功\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.showlogin = true\n\t\t\tsetTimeout(() => {this.$message.warning(\"尚未登陆.\")}, 500);\n\t\t},\n\t\t...mapActions(['loginOut', 'setUserAndState']),\n\t\t...mapMutations({\n\t\t\tsetUserPermissions: 'SET_USER_PERMISSIONS',\n\t\t}),\n\t\tasync tobacked() {\n\t\t\tif(this.nickname){\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tpath: '/about'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.showlogin = true\n\t\t\tsetTimeout(() => {this.$message.warning(\"请先登录.\")}, 500);\n//\n\t\t},\n\t\t// 登录,并对登录的操作进行简单的处理\n\t\tsignLogin(){\n\t\t\tif(this.form.username.replace(/ /g,\"\").length<1 || this.form.password.replace(/ /g,\"\").length<1){\n\t\t\t\treturn this.$message.warning(\"账号或密码不能为空\");\n\t\t\t}\n\t\t\tif(this.nowWait>0){return this.$message.warning(\"操作过快.\");}\n\t\t\tthis.nowWait = 1\n\t\t\tsetTimeout(() => {this.nowWait = 0}, this.wait*1000);\n\t\t\t// 调用登录的方法\n\t\t\tthis.throttleLogin();\n\t\t},\n\t\tasync getMailCode(mail){\n\t\t\tif(!mail){return this.$message.warning(\"邮箱不能为空\");}\n\t\t\tif(!Utils.checkEmail(mail)){return this.$message.warning(\"邮箱格式错误\");}\n\t\t\tthis.$message.success(\"邮件已发送,请注意查收.\")\n\t\t\tlet res = await User.getMailCode(mail)\n\t\t\tthis.$message.success(res.message)\n\t\t},\n\t\t// 忘记密码\n\t\tasync forgotPwd(){\n\t\t\tfor(let i in this.form){if(!this.form[i].length){return this.$message.warning(\"内容不能为空.\")}}\n\t\t\tif(this.form.password != this.form.confirm_password){return this.$message.error(\"两次密码不一致\")}\n\t\t\tif(!Utils.checkEmail(this.form.email)){return this.$message.warning(\"邮箱格式错误\");}\n\t\t\tconst res = await User.forgotPwd(this.form)\n\t\t\tif(res.code!=400){\n\t\t\t\t\tthis.handleClose2();\n\t\t\t\t\tthis.showlogin = true;\n\t\t\t\t\tsetTimeout(() => {this.$message.success(res.message)}, 500);\n\t\t\t}else{this.$message.warning(res.message);}\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.num = this.isnow;\n\t\t// if(this.num!=\"0\"){\n\t\t//     let ul=document.getElementById('navNum') ;\n\t\t//     let li=ul.children[this.num-1];\n\t\t//     li.className='now';\n\t\t// }\n\n\t\tif (this.num == \"1\") {\n\t\t\tthis.isone = true;\n\t\t} else if (this.num == \"2\") {\n\t\t\tthis.istwo = true;\n\t\t}\n\n\t},\n\tcreated() {\n\t\t// 节流登录\n\t\tthis.throttleLogin = Utils.throttle(this.login, this.wait)\n\t},\n}\n",null]}